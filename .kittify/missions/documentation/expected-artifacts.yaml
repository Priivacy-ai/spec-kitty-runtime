# Expected artifact manifest for documentation mission
#
# Defines which artifacts are required/optional at each documentation step.
# Documentation mission uses Divio 4-type system (tutorial, how-to, reference, explanation).
# Step names correspond to mission.yaml workflow phases.

schema_version: "1.0"
mission_type: "documentation"
manifest_version: "1"

# Artifacts required regardless of mission step
required_always: []

# Artifacts required at specific mission steps
# Note: documentation mission uses legacy phases (discover, audit, design, generate, validate, publish)
required_by_step:
  discover:
    # Discover phase requires specification of documentation needs
    - artifact_key: "input.spec.documentation"
      artifact_class: "input"
      path_pattern: "spec.md"
      blocking: true

  audit:
    # Audit phase requires documentation plan
    - artifact_key: "workflow.plan.documentation"
      artifact_class: "workflow"
      path_pattern: "plan.md"
      blocking: true
    - artifact_key: "workflow.tasks.documentation"
      artifact_class: "workflow"
      path_pattern: "tasks.md"
      blocking: true
    # Gap analysis required for structured audit
    - artifact_key: "evidence.gap-analysis"
      artifact_class: "evidence"
      path_pattern: "gap-analysis.md"
      blocking: true

  design:
    # Design phase requires plan and task breakdown
    - artifact_key: "workflow.plan.documentation"
      artifact_class: "workflow"
      path_pattern: "plan.md"
      blocking: true
    - artifact_key: "workflow.tasks.documentation"
      artifact_class: "workflow"
      path_pattern: "tasks.md"
      blocking: true

  generate:
    # Generate phase produces documentation artifacts
    - artifact_key: "output.docs.generated"
      artifact_class: "output"
      path_pattern: "docs/**/*.md"
      blocking: false

  validate:
    # Validate phase checks completeness
    []

  publish:
    # Publish phase finalizes documentation
    []

# Artifacts optional throughout the mission
optional_always:
  - artifact_key: "evidence.research"
    artifact_class: "evidence"
    path_pattern: "research.md"
    blocking: false
  - artifact_key: "evidence.data-model"
    artifact_class: "evidence"
    path_pattern: "data-model.md"
    blocking: false
  - artifact_key: "evidence.quickstart"
    artifact_class: "evidence"
    path_pattern: "quickstart.md"
    blocking: false
  - artifact_key: "evidence.audit-report"
    artifact_class: "evidence"
    path_pattern: "audit-report.md"
    blocking: false
